"use strict";(globalThis["webpackChunkrecpro"]=globalThis["webpackChunkrecpro"]||[]).push([[602],{6602:(e,l,a)=>{a.r(l),a.d(l,{default:()=>J});var t=a(9835),o=a(6970),n=a(499),u=a(9290);const s=(0,t.aZ)({__name:"PlayAudio",setup(e){const l=(0,u.o)(),a=()=>{console.log("playAudio"),window.android&&window.android.playSound()};return(0,t.YP)((()=>l.playAudio),(e=>{e&&(a(),l.playAudio=!1)})),(e,l)=>null}}),d=s,m=d,i=(0,t.aZ)({__name:"RealtimeCoordinate",setup(e){const l=(0,u.o)(),a=(0,t.Fl)((()=>l.updateCoordinate)),o=(0,t.Fl)((()=>l.realTimeCoordinate.join("\n")));return(e,u)=>{const s=(0,t.up)("q-space"),d=(0,t.up)("q-btn"),m=(0,t.up)("q-card-section"),i=(0,t.up)("q-input"),r=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(r,{class:"q-ma-xs q-pb-sm column"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-h6 flex"},{default:(0,t.w5)((()=>[(0,t.Uk)(" 小球实时坐标 "),(0,t.Wm)(s),(0,t.Wm)(d,{rounded:"",color:(0,n.SU)(a)?"primary":"green","text-color":"white",label:(0,n.SU)(a)?"暂停更新":"开始更新",onClick:u[0]||(u[0]=e=>(0,n.SU)(l).updateCoordinate=!(0,n.SU)(l).updateCoordinate)},null,8,["color","label"])])),_:1}),(0,t.Wm)(m,{style:{padding:"0","flex-grow":"1","background-color":"#f2f2f2"}},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{borderless:"",type:"textarea","model-value":(0,n.SU)(o),autogrow:"",disable:""},null,8,["model-value"])])),_:1})])),_:1})}}});var r=a(4458),c=a(3190),b=a(136),p=a(4455),f=a(6611),x=a(9984),U=a.n(x);const g=i,y=g;U()(i,"components",{QCard:r.Z,QCardSection:c.Z,QSpace:b.Z,QBtn:p.Z,QInput:f.Z});var S=a(748);const w={class:"grid-container"},V={key:0},h={key:1,style:{margin:"6px 4px"}},k={key:2,style:{margin:"6px 4px"}},W={key:3,style:{margin:"6px 4px"}},Z={key:4,style:{margin:"6px 4px"}},v={key:5,style:{margin:"6px 4px"}},q={key:6},_=(0,t.aZ)({__name:"KeyboardButtonSetting",props:{button:null},setup(e){const l=e,a=(0,S.U)(),u=(0,t.Fl)((()=>{if(l.button.rightTop.x<=l.button.leftBottom.x||l.button.rightTop.y<=l.button.leftBottom.y||l.button.height<1)return!0;for(const e of a.keyboard)if((e.xIndex!=l.button.xIndex||e.yIndex!=l.button.yIndex)&&e.rightTop.x>l.button.leftBottom.x&&e.rightTop.y>l.button.leftBottom.y&&e.leftBottom.x<l.button.rightTop.x&&e.leftBottom.y<l.button.rightTop.y)return!0;return!1}));return(l,a)=>{const s=(0,t.up)("q-input"),d=(0,t.up)("q-icon");return(0,t.wg)(),(0,t.iD)("div",w,[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(9,(l=>(0,t._)("div",{class:"grid-item",key:l},[1==l?((0,t.wg)(),(0,t.iD)("div",V,(0,o.zw)(e.button.xIndex)+","+(0,o.zw)(e.button.yIndex)+","+(0,o.zw)(e.button.name),1)):2==l?((0,t.wg)(),(0,t.iD)("div",h,[(0,t.Wm)(s,{filled:"",dense:"",modelValue:e.button.rightTop.x,"onUpdate:modelValue":a[0]||(a[0]=l=>e.button.rightTop.x=l),modelModifiers:{number:!0},debounce:400},null,8,["modelValue"])])):3==l?((0,t.wg)(),(0,t.iD)("div",k,[(0,t.Wm)(s,{filled:"",dense:"",modelValue:e.button.rightTop.y,"onUpdate:modelValue":a[1]||(a[1]=l=>e.button.rightTop.y=l),modelModifiers:{number:!0},debounce:400},null,8,["modelValue"])])):5==l?((0,t.wg)(),(0,t.iD)("div",W,[(0,t.Wm)(s,{filled:"",dense:"",modelValue:e.button.height,"onUpdate:modelValue":a[2]||(a[2]=l=>e.button.height=l),modelModifiers:{number:!0},debounce:400},null,8,["modelValue"])])):7==l?((0,t.wg)(),(0,t.iD)("div",Z,[(0,t.Wm)(s,{filled:"",dense:"",modelValue:e.button.leftBottom.x,"onUpdate:modelValue":a[3]||(a[3]=l=>e.button.leftBottom.x=l),modelModifiers:{number:!0},debounce:400},null,8,["modelValue"])])):8==l?((0,t.wg)(),(0,t.iD)("div",v,[(0,t.Wm)(s,{filled:"",dense:"",modelValue:e.button.leftBottom.y,"onUpdate:modelValue":a[4]||(a[4]=l=>e.button.leftBottom.y=l),modelModifiers:{number:!0},debounce:400},null,8,["modelValue"])])):9==l?((0,t.wg)(),(0,t.iD)("div",q,[(0,n.SU)(u)?((0,t.wg)(),(0,t.j4)(d,{key:0,name:"error",size:"20px",color:"red"})):(0,t.kq)("",!0)])):(0,t.kq)("",!0)]))),64))])}}});var R=a(2857),B=a(8149);const O=_,H=O;U()(_,"components",{QInput:f.Z,QIcon:R.Z,QField:B.Z});const C={class:"row"},z={class:"row"},D={class:"row"},Q={style:{"margin-right":"10px"}},L=(0,t.aZ)({__name:"ParamSetting",setup(e){const l=(0,u.o)(),a=(0,n.iH)(!1),o=(0,n.iH)(!1),s=(0,n.iH)(!1),d=(0,S.U)(),m=(0,t.Fl)((()=>d.keyboardMapper)),i=(0,n.iH)();(0,n.iH)();return(0,t.YP)((()=>l.totalKey),(e=>{a.value&&localStorage.setItem("settings",JSON.stringify({buttonHeight:l.buttonHeight,axisRate:l.axisRate,axisOffset:l.axisOffset,axisRate2:l.axisRate2,axisOffset2:l.axisOffset2,limit:{minX:l.minX,maxX:l.maxX,minY:l.minY,maxY:l.maxY,threshold:l.threshold,btnBounce:l.btnBounce},L1:l.L1,L2:l.L2,ball:{size:l.ball.size,touchSize:l.ball.touchSize,shadow:l.ball.shadow}})),console.log("save")})),(0,t.YP)((()=>d.keyboardKey),(e=>{a.value&&localStorage.setItem("keyboard",JSON.stringify(d.keyboard))})),(0,t.bv)((()=>{if(localStorage.getItem("settings")){const e=JSON.parse(localStorage.getItem("settings"));l.buttonHeight=e.buttonHeight,l.axisRate=e.axisRate,l.axisOffset=e.axisOffset,l.axisRate2=e.axisRate2,l.axisOffset2=e.axisOffset2,l.minX=e.limit.minX,l.maxX=e.limit.maxX,l.minY=e.limit.minY,l.maxY=e.limit.maxY,l.threshold=e.limit.threshold,l.btnBounce=e.limit.btnBounce,l.L1=e.L1,l.L2=e.L2,l.ball=e.ball??l.ball}localStorage.getItem("keyboard")&&(d.keyboard=JSON.parse(localStorage.getItem("keyboard"))),0==d.keyboard.length&&d.pushDefault(),a.value=!0})),(e,a)=>{const u=(0,t.up)("q-card-section"),r=(0,t.up)("q-btn"),c=(0,t.up)("q-card"),b=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(c,{class:"q-mx-xs q-py-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"text-h6"},{default:(0,t.w5)((()=>[(0,t.Uk)(" 右侧参数设置 ")])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" 按键高度 "),(0,t._)("div",C,[(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",type:"number","stack-label":"",modelValue:(0,n.SU)(l).buttonHeight.high,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.SU)(l).buttonHeight.high=e),label:"键盘默认高度"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",type:"number","stack-label":"",modelValue:(0,n.SU)(l).buttonHeight.medium,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.SU)(l).buttonHeight.medium=e),label:"触摸默认高度"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col",type:"number","stack-label":"",modelValue:(0,n.SU)(l).buttonHeight.low,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.SU)(l).buttonHeight.low=e),label:"键盘中间默认"},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" 三轴倍率 "),(0,t._)("div",z,[(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisRate.x,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.SU)(l).axisRate.x=e),label:"X1"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisRate.y,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,n.SU)(l).axisRate.y=e),label:"Y1"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisRate.z,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,n.SU)(l).axisRate.z=e),label:"Z1"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisRate2.x,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,n.SU)(l).axisRate2.x=e),label:"X2"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisRate2.y,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,n.SU)(l).axisRate2.y=e),label:"Y2"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisRate2.z,"onUpdate:modelValue":a[8]||(a[8]=e=>(0,n.SU)(l).axisRate2.z=e),label:"Z2"},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" 三轴偏移 "),(0,t._)("div",D,[(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",ref_key:"inputa",ref:i,type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisOffset.x,"onUpdate:modelValue":a[9]||(a[9]=e=>(0,n.SU)(l).axisOffset.x=e),label:"X1"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisOffset.y,"onUpdate:modelValue":a[10]||(a[10]=e=>(0,n.SU)(l).axisOffset.y=e),label:"Y1"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisOffset.z,"onUpdate:modelValue":a[11]||(a[11]=e=>(0,n.SU)(l).axisOffset.z=e),label:"Z1"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",ref_key:"inputa",ref:i,type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisOffset2.x,"onUpdate:modelValue":a[12]||(a[12]=e=>(0,n.SU)(l).axisOffset2.x=e),label:"X2"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col q-mr-sm",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisOffset2.y,"onUpdate:modelValue":a[13]||(a[13]=e=>(0,n.SU)(l).axisOffset2.y=e),label:"Y2"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{dense:"",class:"col",type:"number","stack-label":"",modelValue:(0,n.SU)(l).axisOffset2.z,"onUpdate:modelValue":a[14]||(a[14]=e=>(0,n.SU)(l).axisOffset2.z=e),label:"Z2"},null,8,["modelValue"])])])),_:1}),"/record"==e.$route.fullPath?((0,t.wg)(),(0,t.j4)(u,{key:0,class:"row q-px-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{dense:"",flat:"","text-color":"orange",label:"返回场景",onClick:a[15]||(a[15]=l=>e.$router.push("/"))})])),_:1})):((0,t.wg)(),(0,t.j4)(u,{key:1,class:"row q-px-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{dense:"",flat:"","text-color":"red",label:"键位设置",onClick:a[16]||(a[16]=e=>s.value=!s.value)}),(0,t.Wm)(r,{dense:"",flat:"","text-color":"green",label:"切换场景",onClick:a[17]||(a[17]=e=>(0,n.SU)(l).enableScene=(0,n.SU)(l).enableScene?0:1)}),(0,t.Wm)(r,{dense:"",flat:"","text-color":"blue",label:"坐标映射",onClick:a[18]||(a[18]=e=>o.value=!0)}),(0,t.Wm)(r,{dense:"",flat:"","text-color":"orange",label:"打标数据",onClick:a[19]||(a[19]=l=>e.$router.push("/record"))})])),_:1})),(0,t.Wm)(b,{modelValue:o.value,"onUpdate:modelValue":a[25]||(a[25]=e=>o.value=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(f.Z),{type:"number","stack-label":"",modelValue:(0,n.SU)(l).btnBounce,"onUpdate:modelValue":a[20]||(a[20]=e=>(0,n.SU)(l).btnBounce=e),label:"按钮防抖"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{type:"number","stack-label":"",modelValue:(0,n.SU)(l).L1,"onUpdate:modelValue":a[21]||(a[21]=e=>(0,n.SU)(l).L1=e),label:"L1"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{type:"number","stack-label":"",modelValue:(0,n.SU)(l).L2,"onUpdate:modelValue":a[22]||(a[22]=e=>(0,n.SU)(l).L2=e),label:"L2"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{type:"number","stack-label":"",modelValue:(0,n.SU)(l).ball.size,"onUpdate:modelValue":a[23]||(a[23]=e=>(0,n.SU)(l).ball.size=e),modelModifiers:{number:!0},label:"小球面积"},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(f.Z),{type:"number","stack-label":"",modelValue:(0,n.SU)(l).ball.shadow,"onUpdate:modelValue":a[24]||(a[24]=e=>(0,n.SU)(l).ball.shadow=e),modelModifiers:{number:!0},label:"阴影大小"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(b,{modelValue:s.value,"onUpdate:modelValue":a[27]||(a[27]=e=>s.value=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{style:{"max-width":"1000px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:"q-ma-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{color:"primary",label:"重置到初始值",onClick:a[26]||(a[26]=e=>(0,n.SU)(d).pushDefault())})])),_:1}),((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(3,(e=>(0,t.Wm)(u,{class:"row",style:{"flex-wrap":"nowrap"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(2==e?6:5,(l=>((0,t.wg)(),(0,t.iD)("div",Q,[(0,t.Wm)(H,{button:(0,n.SU)(m).get(l-1+","+(e-1))},null,8,["button"])])))),256))])),_:2},1024))),64))])),_:1})])),_:1},8,["modelValue"])])),_:1})}}});var Y=a(1639),I=a(2074);const T=(0,Y.Z)(L,[["__scopeId","data-v-ee3e234c"]]),X=T;U()(L,"components",{QCard:r.Z,QCardSection:c.Z,QInput:f.Z,QBtn:p.Z,QDialog:I.Z});const M=(0,t.aZ)({__name:"MainLayout",setup(e){const l=(0,n.iH)(!0),a=(0,u.o)();return window.receiveSubBallCoordinate=(e,l,t,o,n)=>{a.subBallReceiver.forEach((a=>{a(e,l,t,o,n)}))},window.getBase64=e=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.setRequestHeader("Content-type","text/csv"),console.log("下载"),l.responseType="blob",l.onload=function(e){if(200==this.status){var l=this.response,a=new FileReader;a.readAsDataURL(l),a.onloadend=function(){var e=a.result;window.download.getBase64FromBlobData(e,"data-"+(new Date).getTime()+".csv")}}},l.send()},(e,u)=>{const s=(0,t.up)("q-drawer"),d=(0,t.up)("q-space"),i=(0,t.up)("q-card"),r=(0,t.up)("q-header"),c=(0,t.up)("router-view"),b=(0,t.up)("q-page-container"),p=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(p,{view:"lHh lpR lFf"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{"show-if-above":"",modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value=e),side:"left",style:{display:"flex","flex-flow":"column nowrap"}},{default:(0,t.w5)((()=>[(0,t.Wm)(X),(0,t.Wm)(y,{class:"col"})])),_:1},8,["modelValue"]),(0,t.Wm)(r,{class:"bg-transparent"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{class:"q-ma-xs q-pa-lg text-h5 text-black flex"},{default:(0,t.w5)((()=>[(0,t.Uk)(" 输入内容显示区 "),(0,t.Wm)(d),(0,t.Uk)(" "+(0,o.zw)((0,n.SU)(a).content),1)])),_:1})])),_:1}),(0,t.Wm)(m),(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c)])),_:1})])),_:1})}}});var F=a(7605),j=a(3655),P=a(1116),K=a(2133);const A=M,J=A;U()(M,"components",{QLayout:F.Z,QDrawer:j.Z,QHeader:P.Z,QCard:r.Z,QSpace:b.Z,QPageContainer:K.Z})}}]);