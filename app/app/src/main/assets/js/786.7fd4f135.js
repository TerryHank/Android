"use strict";(globalThis["webpackChunkrecpro"]=globalThis["webpackChunkrecpro"]||[]).push([[786],{786:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var i=n(9835),o=n(499),s=n(6309),a=n(9302),r=n(9290),l=n(6535),c=n(2878);const p=(0,r.o)(),d=0,u=222,m=0,g=154;(0,o.iH)(1);const h=new l.xoR({color:"blue",specular:16777215,shininess:30}),w=(new l.xoR({color:8410453,specular:8410453,shininess:30}),new l.xoR({color:8421504,specular:8421504,shininess:30}));let f=0,b="";const v=e=>{if((new Date).getTime()-f<1e3*p.btnBounce)return;if(b==e)return;b=e,p.playAudio=!0;const t=e.replace("right","");console.log(e,t),f=(new Date).getTime()},x=(e,t)=>{for(let n=0;n<4;n++){let i=36,o=46+30*n;for(let s=0;s<6;s++){let a=p.buttonHeight.medium;const r=7,l=7,c=`${s},${n}`;if(console.log(e,t,i,o,e>i-r,e<i+r,t<o+l,t>o-l),e>i-r&&e<i+r&&t<o+l&&t>o-l)return{name:c,x:i,y:o,z:a};i+=30}}for(let n=0;n<9;n++){if(5==n)continue;let i=52+15*n,o=19,s=p.buttonHeight.medium;const a=7,r=7,l=`${n},-1`;if(e>i-a&&e<i+a&&t<o+r&&t>o-r)return{name:l,x:i,y:o,z:s}}return null},S=()=>{let e=I[0];I.filter((e=>e.position.z>0)).forEach((t=>{t.position.z<e.position.z&&(e=t)})),I.forEach((e=>e.visible=!1)),e.visible=!0,p.scene?.getObjectByName("blockGroup")?.children.forEach((e=>{e.material=w}));const t=x(e.position.x,e.position.y);if(t){if(e.position.z>t.z)return void p.pushRealTimeCoordinate(`${t.name} 上小球因高度超出不触发`);p.pushRealTimeCoordinate(`${t.name} 上小球触发 ${e.position.x},${e.position.y},${e.position.z}`);const n=p.scene?.getObjectByName("blockGroup")?.getObjectByName(t.name);return n.material=h,setTimeout((()=>{n.material=w}),3e3),void v(t.name)}},$=(e,t,n,i)=>{if(!i)return void p.pushRealTimeCoordinate(`箭头坐标 ${parseInt(String(e))},${parseInt(String(t))} 但不更新`);const o=p.scene?.getObjectByName("arrow");let s=o.position.x+e,a=o.position.y+t;a<m?a=m:a>g&&(a=g),s<0?s=0:s>u&&(s=u),o?.position.set(s,a,o.position.z),p.pushRealTimeCoordinate(`箭头坐标 ${parseInt(String(e))},${parseInt(String(t))} 映射后 ${parseInt(String(s))},${parseInt(String(a))}`)},y=(e,t,n,i,o)=>{i==o&&S();const s=I[i];if(e>2e3&&t>2e3)return void(s.visible=!1);const a=p.scene.getObjectByName("arrow"),r=parseInt(String(p.axisRate2.x))*e+parseInt(String(p.axisOffset2.x)),l=parseInt(String(p.axisRate2.y))*t+parseInt(String(p.axisOffset2.y)),c=parseInt(String(p.axisRate2.z))*n+parseInt(String(p.axisOffset2.z)),h=(parseInt(String(r))-p.minX)/(p.maxX-p.minX)*(u-d)+d,w=(parseInt(String(l))-p.minY)/(p.maxY-p.minY)*(g-m)+m;let f=h+a.position.x,b=w+a.position.y,v=c;f=f<d?d:f>u?u:f,b=b<m?m:b>g?g:b,s.position.set(f,b,v);const x=I.find((e=>e.position.z<n));x&&x.id!=s.id||(I.forEach((e=>e.visible=!1)),s.visible=!0);const $=s.position.z-1;s.children[0].scale.set(1,$/100,1),p.pushRealTimeCoordinate(`${i}号小球 ${parseInt(String(e))},${parseInt(String(t))},${parseInt(String(n))} 映射后 ${parseInt(String(f))},${parseInt(String(b))},${parseInt(String(v))}`)};let I=[];const R=e=>{I=[];new l.xoR({color:"red",shininess:30});const t=new l.vBJ({color:"red"}),n=new l.xo$(2,32,32);for(let o=0;o<4;o++){const i=new l.Kj0(n,t);i.position.set(0,0,100),i.visible=!1;const o=new l.fHI(.2,.2,100,16),s=new l.Kj0(o,t);s.position.set(0,0,0),s.geometry.translate(0,-50,0),s.rotateOnAxis(new l.Pa4(1,0,0),Math.PI/2),i.add(s);const a=new l.xo$(1,16,16),r=new l.Kj0(a,t);s.add(r),r.position.set(0,0,0),r.geometry.translate(0,-100,0),s.scale.set(1,.3,1),e.add(i),I.push(i)}const i=new l.Kj0(n,t);i.name="arrow",i.position.set(111,72,10),i.visible=!1,e.add(i)},T=()=>{window.receiveMainCoordinate=$,p.subBallReceiver.set("ball2",y)},j=()=>{p.subBallReceiver.delete("ball2")},z={createBall:R,updateBall:S,initReceiveFunction:T,removeReceiveFunction:j};var B=n(794);const C=(0,i.aZ)({__name:"TouchScene",setup(e){const t=(0,o.iH)();(0,a.Z)();let n,s,p,d=!1;var u=new l.SUY,m=24,g=1/m,h=0;const w=()=>{if(!d){requestAnimationFrame(w);var e=u.getDelta();h+=e,h>g&&(p.render(n,s),h=0)}},f=(0,r.o)();(0,i.YP)((()=>f.heightKey),(e=>{n.clear(),x()}));const b=()=>{const e=document.createElement("canvas");e.width=286,e.height=128;const t=e.getContext("2d");t.font="48px 'STKaiti', '华文楷体', serif",t.fillStyle="rgba(255,0,0, 0.8)",t.textAlign="center",t.textBaseline="middle",t.fillText("原",32,64),t.fillText("宇",96,64),t.fillText("科",160,64),t.fillText("技",224,64);const i=(new l.dpR).load(e.toDataURL("image/png")),o=new l.vBJ({map:i,transparent:!0,side:l.ehD}),s=new l._12(222,90),a=new l.Kj0(s,o);a.position.set(122,150,30),a.rotation.x=Math.PI/2,n.add(a),e.remove()},v=()=>{const e=new l.xoR({color:8421504,specular:8421504,shininess:30}),t=new l.ZAu;t.name="blockGroup",n.add(t);for(let n=0;n<4;n++){let i=30,o=40+30*n;for(let s=0;s<6;s++){let a=f.buttonHeight.medium;const r=new l.DvJ(12,12,a),c=new l.Kj0(r,e);c.position.set(i+6,o+6,a/2),c.name=`${s},${n}`,t.add(c),i+=30}}for(let n=0;n<9;n++){if(5==n)continue;let i=46+15*n,o=13,s=f.buttonHeight.medium;const a=new l.DvJ(12,12,s),r=new l.Kj0(a,e);r.position.set(i+6,o+6,s/2),r.name=`${n},-1`,t.add(r)}},x=()=>{n.add(s),B.Z.createPlane(n,222,154),z.createBall(n);const e=new l.Ox3(16777215,1);e.position.set(20,20,10),n.add(e),s.position.x=61,v(),b()};let S=!1,$={width:0,height:0};const y=()=>{const e=t.value;n=new l.xsS,f.scene=n;const i=document.querySelector(".q-page");S||($.width=i.clientWidth,$.height=i.clientHeight),s=new l.cPb(80,$.width/$.height,.1,3e3),s.position.set(0,-70,60),s.lookAt(111,77,0),p=new l.CP7,p.setSize($.width,$.height-40),p.setClearColor(12178431,1),e.appendChild(p.domElement);const o=new c.z(s,p.domElement);o.enableDamping=!0,o.target.set(111,77,0),S=!0,x(),w()};return(0,i.bv)((()=>{y(),setTimeout((()=>{const e=f.buttonHeight.low;f.buttonHeight.low=10,setTimeout((()=>{f.buttonHeight.low=e}),500)}),5e3),setTimeout((()=>{z.initReceiveFunction()}),500)})),(0,i.Jd)((()=>{d=!0,z.removeReceiveFunction()})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",{ref_key:"video_container",ref:t},null,512))}});var k=n(9885),H=n(9984),O=n.n(H);const P=C,D=P;O()(C,"components",{QPage:k.Z});const K=(0,i.aZ)({__name:"IndexPage",setup(e){const t=(0,r.o)();return(e,n)=>{const a=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(a,{class:"row items-center justify-evenly",style:{position:"relative"}},{default:(0,i.w5)((()=>[0==(0,o.SU)(t).enableScene?((0,i.wg)(),(0,i.j4)(s.Z,{key:0})):((0,i.wg)(),(0,i.j4)(D,{key:1}))])),_:1})}}}),Z=K,_=Z;O()(K,"components",{QPage:k.Z})}}]);